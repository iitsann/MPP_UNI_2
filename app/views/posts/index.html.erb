<div class="container mt-4">
  <h1><%= I18n.t("post_list") %></h1>
  <%= form_with(url: search_posts_path, method: :get, local: true, class: "form-inline mt-3") do |form| %>
    <div class="form-group mr-2">
      <%= form.label :search, I18n.t("search_by_title")%>
      <%= form.text_field :search, value: (params[:search].present? ? params[:search] : ''), class: "form-control" %>
    </div>
    <%= form.submit I18n.t("search"), class: "btn btn-info" %>
  <% end %>
  <%= form_with(url: posts_path, method: :get, local: true, class: "form-inline") do |form| %>
    <div class="form-group mr-2">
      <%= form.label :sort_by, I18n.t("sort_by") %>
      <%= form.select :sort_by, options_for_select({I18n.t("rating1") => I18n.t("rating2"), I18n.t("date1") => I18n.t("date2"), I18n.t("topics1") => I18n.t("topics2") }), {}, class: "form-control" %>
    </div>
    <div class="form-group mr-2">
      <%= form.label :direction, I18n.t("direction") %>
      <%= form.select :direction, options_for_select({ I18n.t("ascending") => "asc", I18n.t("descending") => "desc" }), {}, class: "form-control" %>
    </div>
    <%= form.submit I18n.t("filter"), class: "btn btn-info" %>
  <% end %>
  <div class="text-center mb-4">
    <%= link_to I18n.t("new_post"), new_post_path, class: "btn btn-primary" %>
  </div>
  <% @posts.each do |post| %>
    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        <%= button_to "Like", like_post_path(post), method: :put, class: "btn btn-success btn-sm" %>
      </div>
      <div>
        <%= link_to post.title, post_path(post) %>
        <small class="text-muted">
          (Likes: <%= post.likes %> | Dislikes: <%= post.dislikes %>) from <%= link_to post.topic.name, topic_path(post.topic) %>
        </small>
      </div>
      <div>
        <%= button_to "Dislike", dislike_post_path(post), method: :put, class: "btn btn-outline-danger btn-sm" %>
      </div>
    </div>
  <% end %>
</div>
